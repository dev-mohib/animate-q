import{r as m,u as o,b as c,j as l,a as u}from"./app-a8171a9a.js";import g from"./fabricCanvas-40ddd714.js";import F from"./controls-b0b61d86.js";import"./UndoRedo-9dce11c5.js";const O=()=>{const[d,t]=m.useState({activeThread:0,isPlayAll:!1,threads:[]}),n=o(),f={pushThread:a=>{t(e=>({...e,threads:[...d.threads,a]}))},popThread:a=>{t(e=>({...e,threads:e.threads.filter((r,s)=>s!=(a??e.threads.length-1))}))},pauseThread:a=>{t(e=>({...e,threads:e.threads.map((r,s)=>s==a?{...r,isPlaying:!1}:{...r})}))},reOrderThreads:a=>{t(e=>({...e,threads:a}))},playThread:a=>{t(e=>({...e,threads:e.threads.map((r,s)=>s==a?{...r,isPlaying:!0}:{...r})}))},setActiveThread:a=>{t(e=>({...e,activeThread:a}))},setDegreeOfOrigin:(a,e)=>{t(r=>({...r,threads:r.threads.map((s,i)=>i==e?{...s,degreeOfOrigin:a}:s)}))},setActiveFrame:(a,e)=>{t(r=>({...r,threads:r.threads.map((s,i)=>i==a?{...s,activeFrame:e}:s)}))},setFps:(a,e)=>{a=="increase"?t(r=>({...r,threads:r.threads.map((s,i)=>i==e?{...s,fps:s.fps<30?s.fps+5:s.fps}:{...s})})):t(r=>({...r,threads:r.threads.map((s,i)=>i==e?{...s,fps:s.fps>5?s.fps-5:s.fps}:{...s})}))},playAll:()=>{t(a=>({...a,threads:a.threads.map(e=>({...e,isPlaying:!0}))}))},pauseAll:()=>{t(a=>({...a,threads:a.threads.map(e=>({...e,isPlaying:!1}))}))},pushFrame:a=>{t(e=>({...e,threads:e.threads.map((r,s)=>s==a?{...r,frames:[...r.frames,{isFilled:!1}]}:r)}))},popFrame:a=>{t(e=>({...e,threads:e.threads.map((r,s)=>s==a?{...r,frames:r.frames.filter((i,h)=>h!=r.frames.length-1)}:r)}))},fillFrame:(a,e)=>{t(r=>({...r,threads:r.threads.map((s,i)=>i==a?{...s,frames:s.frames.map((h,p)=>p==e?{...h,isFilled:!0}:h)}:s)}))},unfillFrame:a=>{},getState:()=>d};return m.useEffect(()=>{window.addEventListener("orientationchange",a=>{n(c.setWindowResized())}),f.pushThread({fps:15,index:0,isActive:!1,isPlaying:!1,degreeOfOrigin:0,frames:[{isFilled:!1}],activeFrame:0})},[]),l.jsxs("div",{className:"bg-black",children:[l.jsx(u,{title:"Editor"}),l.jsx(g,{tState:d,tActions:f}),l.jsx(F,{threadState:d,actions:f})]})};export{O as default};
